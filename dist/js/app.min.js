$(document).ready(function(){var i=$(window),n=$(document),t=[.02,.01,.47,1];function s(){var e,a,t;svg4everybody(),window.viewportUnitsBuggyfill.init({force:!0,refreshDebounceWait:150,appendToBody:!0}),$("[js-selectric]").each(function(e,a){var t=$(a).data("icon")||"drop-arrow",i='<b class="button"><svg class="ico ico-'+t+'"><use xlink:href="img/sprite.svg#ico-'+t+'"></use></svg></b>';$(a).selectric({maxHeight:300,arrowButtonMarkup:i,onInit:function(e,a){var t=$(e),i=t.closest("."+a.classes.wrapper);i.find(".label").html(t.attr("placeholder"))},onBeforeOpen:function(e,a){var t=$(e),i=t.closest("."+a.classes.wrapper);i.find(".label").data("value",i.find(".label").html()).html(t.attr("placeholder"))},onBeforeClose:function(e,a){var t=$(e),i=t.closest("."+a.classes.wrapper);i.find(".label").html(i.find(".label").data("value"))}})}),$("[js-dateMask]").mask("99.99.99",{placeholder:"ДД.ММ.ГГ"}),$("input[type='tel']").mask("+7 (000) 000-0000",{placeholder:"+7 (___) ___-____"}),$("[js-mask-number]").mask("999 999 999"),n.on("keydown","[js-mask-price]",function(e){-1!==$.inArray(e.keyCode,[46,8,9,27,13,110])||65==e.keyCode&&!0===e.ctrlKey||35<=e.keyCode&&e.keyCode<=39||((e.shiftKey||e.keyCode<48||57<e.keyCode)&&(e.keyCode<96||105<e.keyCode)&&e.preventDefault(),10<$(this).val().length&&e.preventDefault())}).on("keyup","[js-mask-price]",function(e){0<$(this).val().length&&($(this).val($(this).val().replace(/ /g,"")),$(this).val($(this).val().replace(/\B(?=(\d{3})+(?!\d))/g," ")))}),0<$("[js-scrollbar]").length&&$("[js-scrollbar]").each(function(e,a){if($(a).not(".ps")){var t=$(a).data("x-disable")||!1,i=$(a).data("y-disable")||!1;new PerfectScrollbar(a,{suppressScrollX:t,suppressScrollY:i,wheelPropagation:!0,minScrollbarLength:20})}}),0<(e=$("[js-autocomplete]")).length&&e.each(function(e,a){$(a).easyAutocomplete({url:$(a).data("url"),getValue:"name",list:{match:{enabled:!0},showAnimation:{type:"fade",time:200},hideAnimation:{type:"slide",time:200}}})}),$("[js-validate-cb]").validate({errorPlacement:function(e,a){e.addClass("ui-input__validation"),e.appendTo(a.parent())},highlight:function(e){$(e).addClass("has-error")},unhighlight:function(e){$(e).removeClass("has-error")},submitHandler:function(t){$(t).addClass("loading"),$.ajax({type:"POST",url:$(t).attr("action"),data:$(t).serialize(),success:function(e){$(t).removeClass("loading");var a=$.parseJSON(e);"success"==a.status||$(t).find("[data-error]").html(a.message).show()}}),$(t).hide(),$(t).parent().find(".cb__form-thanks").fadeIn()},rules:{name:"required",email:{required:!0,email:!0},message:"required"},messages:{name:"Заполните это поле",email:{required:"Заполните это поле",email:"Email содержит неправильный формат"},message:"Заполните это поле"}}),0<$("#property-map").length&&ymaps.ready(function(){a=new ymaps.Map("property-map",{center:[55.76,37.64],zoom:12}),t=new ymaps.Placemark([55.76,37.64],{hintContent:"Москва!",balloonContent:"Столица России"}),a.geoObjects.add(t)}),i.on("resize",debounce(r,200))}s(),(0<window.navigator.userAgent.indexOf("MSIE ")||navigator.userAgent.match(/Trident.*rv\:11\./))&&$("body").addClass("is-ie"),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&$("body").addClass("is-mobile"),n.on("click",'[href="#"]',function(e){e.preventDefault()}),n.on("click","[js-tab]",function(e){var a=$(this).data("target"),t=$("[data-tab="+a+"]");a&&t&&($(this).siblings().removeClass("is-active"),$(this).addClass("is-active"),t.siblings().slideUp(),t.slideDown(),o(!1))}),n.one("focus.autoExpand",".ui-group textarea",function(){var e=this.value;this.value="",this.baseScrollHeight=this.scrollHeight,this.value=e}).on("input.autoExpand",".ui-group textarea",function(){var e,a=0|this.getAttribute("data-min-rows");this.rows=a,e=Math.ceil((this.scrollHeight-this.baseScrollHeight)/17),this.rows=a+e}),Barba.Pjax.Dom.containerClass="page";var e=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.fadeOut()]).then(this.fadeIn.bind(this))},fadeOut:function(){var a=Barba.Utils.deferred();return anime({targets:this.oldContainer,opacity:.5,easing:t,duration:300,complete:function(e){a.resolve()}}),a.promise},fadeIn:function(){var a=this,e=$(this.newContainer);$(this.oldContainer).hide(),e.css({visibility:"visible",opacity:.5}),anime({targets:"html, body",scrollTop:1,easing:t,duration:150}),anime({targets:this.newContainer,opacity:1,easing:t,duration:300,complete:function(e){o(),a.done()}})}});function o(e){e&&i.scrollTop(0),$(window).scroll(),$(window).resize()}function r(){var e=window.location.host.toLowerCase();if(0<=e.indexOf("localhost")||0<=e.indexOf("surge")){var a="<div class='dev-bp-debug'>"+i.width()+"</div>";$(".page").append(a),setTimeout(function(){$(".dev-bp-debug").fadeOut()},1e3),setTimeout(function(){$(".dev-bp-debug").remove()},1500)}}Barba.Pjax.getTransition=function(){return e},Barba.Prefetch.init(),Barba.Pjax.start(),Barba.Dispatcher.on("newPageReady",function(e,a,t,i){s(),closeMobileMenu()})});